2025-08-11 09:15:24.283 +01:00 [INF] Application is shutting down...
2025-08-11 13:55:56.140 +01:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-11 13:55:56.392 +01:00 [INF] Now listening on: http://localhost:5180
2025-08-11 13:55:56.397 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-11 13:55:56.400 +01:00 [INF] Hosting environment: Development
2025-08-11 13:55:56.404 +01:00 [INF] Content root path: C:\Users\user\Desktop\c##\CqrsShop\presentation
2025-08-11 13:56:09.772 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/swagger/index.html - null null
2025-08-11 13:56:09.788 +01:00 [WRN] Failed to determine the https port for redirect.
2025-08-11 13:56:09.952 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/swagger/index.html - 200 null text/html;charset=utf-8 181.2064ms
2025-08-11 13:56:10.209 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/swagger/swagger-ui.css - null null
2025-08-11 13:56:10.217 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/swagger/index.css - null null
2025-08-11 13:56:10.219 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/swagger/swagger-ui-standalone-preset.js - null null
2025-08-11 13:56:10.219 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/swagger/index.js - null null
2025-08-11 13:56:10.220 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/swagger/swagger-ui-bundle.js - null null
2025-08-11 13:56:10.266 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/swagger/index.js - 200 null application/javascript;charset=utf-8 46.3963ms
2025-08-11 13:56:10.268 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/swagger/index.css - 200 202 text/css 50.4796ms
2025-08-11 13:56:10.308 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/swagger/swagger-ui-standalone-preset.js - 200 229223 text/javascript 88.1662ms
2025-08-11 13:56:10.310 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/swagger/swagger-ui.css - 200 155175 text/css 102.3591ms
2025-08-11 13:56:10.340 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/swagger/swagger-ui-bundle.js - 200 1485750 text/javascript 120.5646ms
2025-08-11 13:56:11.220 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/swagger/favicon-32x32.png - null null
2025-08-11 13:56:11.220 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/swagger/v1/swagger.json - null null
2025-08-11 13:56:11.258 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/swagger/favicon-32x32.png - 200 628 image/png 38.6708ms
2025-08-11 13:56:11.589 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 368.7317ms
2025-08-11 13:57:39.367 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/api/UserProfile - null null
2025-08-11 13:57:39.448 +01:00 [INF] Executing endpoint 'Presentation.Controllers.UserProfileController.GetAllUsers (Presentation)'
2025-08-11 13:57:39.479 +01:00 [INF] Route matched with {action = "GetAllUsers", controller = "UserProfile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllUsers() on controller Presentation.Controllers.UserProfileController (Presentation).
2025-08-11 13:57:41.635 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FirstName", a."LastName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."TwoFactorEnabled", a."UpdatedAt", a."UserName"
FROM "AspNetUsers" AS a
2025-08-11 13:57:41.723 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[Domain.Entities.Models.User, Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Application.DTOs.UserPofileDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 13:57:41.740 +01:00 [INF] Executed action Presentation.Controllers.UserProfileController.GetAllUsers (Presentation) in 2247.1502ms
2025-08-11 13:57:41.745 +01:00 [INF] Executed endpoint 'Presentation.Controllers.UserProfileController.GetAllUsers (Presentation)'
2025-08-11 13:57:41.758 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/api/UserProfile - 200 null application/json; charset=utf-8 2390.9119ms
2025-08-11 13:57:59.800 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/api/Products - null null
2025-08-11 13:57:59.820 +01:00 [INF] Executing endpoint 'Presentation.Controllers.ProductsController.GetAllProducts (Presentation)'
2025-08-11 13:57:59.833 +01:00 [INF] Route matched with {action = "GetAllProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllProducts() on controller Presentation.Controllers.ProductsController (Presentation).
2025-08-11 13:57:59.922 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Category", p."CreatedAt", p."Description", p."Name", p."Price", p."StockQuantity", p."UpdatedAt", p."UserId"
FROM "Product" AS p
2025-08-11 13:57:59.933 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[Domain.Entities.Models.Product, Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Application.DTOs.ProductDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 13:57:59.954 +01:00 [INF] Executed action Presentation.Controllers.ProductsController.GetAllProducts (Presentation) in 109.9124ms
2025-08-11 13:57:59.960 +01:00 [INF] Executed endpoint 'Presentation.Controllers.ProductsController.GetAllProducts (Presentation)'
2025-08-11 13:57:59.964 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/api/Products - 200 null application/json; charset=utf-8 164.0016ms
2025-08-11 13:58:22.226 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5180/api/Order - application/json 172
2025-08-11 13:58:22.238 +01:00 [INF] Executing endpoint 'Presentation.Controllers.OrderController.PlaceOrder (Presentation)'
2025-08-11 13:58:22.259 +01:00 [INF] Route matched with {action = "PlaceOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PlaceOrder(Application.Features.Orders.Commands.CreateOrder.PlaceOrderCommand) on controller Presentation.Controllers.OrderController (Presentation).
2025-08-11 13:58:22.301 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-08-11 13:58:22.322 +01:00 [INF] Executed action Presentation.Controllers.OrderController.PlaceOrder (Presentation) in 57.2332ms
2025-08-11 13:58:22.327 +01:00 [INF] Executed endpoint 'Presentation.Controllers.OrderController.PlaceOrder (Presentation)'
2025-08-11 13:58:22.331 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5180/api/Order - 400 null application/problem+json; charset=utf-8 104.2895ms
2025-08-11 13:58:36.149 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5180/api/Order - application/json 171
2025-08-11 13:58:36.157 +01:00 [INF] Executing endpoint 'Presentation.Controllers.OrderController.PlaceOrder (Presentation)'
2025-08-11 13:58:36.161 +01:00 [INF] Route matched with {action = "PlaceOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PlaceOrder(Application.Features.Orders.Commands.CreateOrder.PlaceOrderCommand) on controller Presentation.Controllers.OrderController (Presentation).
2025-08-11 13:58:36.341 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FirstName", a."LastName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."TwoFactorEnabled", a."UpdatedAt", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__userId_0
LIMIT 2
2025-08-11 13:58:36.465 +01:00 [INF] Executed DbCommand (71ms) [Parameters=[@__productIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Category", p."CreatedAt", p."Description", p."Name", p."Price", p."StockQuantity", p."UpdatedAt", p."UserId"
FROM "Product" AS p
WHERE p."Id" = ANY (@__productIds_0)
2025-08-11 13:58:36.749 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = Decimal), @p7='?' (DbType = Guid), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?' (DbType = Decimal), @p11='?' (DbType = Guid), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Order" ("Id", "CustomerId", "OrderDate", "Status", "TotalAmount")
VALUES (@p0, @p1, @p2, @p3, @p4);
UPDATE "Product" SET "StockQuantity" = @p5, "UpdatedAt" = @p6
WHERE "Id" = @p7;
INSERT INTO "OrderItem" ("Id", "OrderId", "Price", "ProductId", "Quantity")
VALUES (@p8, @p9, @p10, @p11, @p12);
2025-08-11 13:58:36.787 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Guid'.
2025-08-11 13:58:36.813 +01:00 [INF] Executed action Presentation.Controllers.OrderController.PlaceOrder (Presentation) in 643.6445ms
2025-08-11 13:58:36.817 +01:00 [INF] Executed endpoint 'Presentation.Controllers.OrderController.PlaceOrder (Presentation)'
2025-08-11 13:58:36.820 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5180/api/Order - 201 null application/json; charset=utf-8 670.788ms
2025-08-11 13:59:00.693 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/api/Order - null null
2025-08-11 13:59:00.704 +01:00 [INF] Executing endpoint 'Presentation.Controllers.OrderController.GetAllOrders (Presentation)'
2025-08-11 13:59:00.715 +01:00 [INF] Route matched with {action = "GetAllOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllOrders() on controller Presentation.Controllers.OrderController (Presentation).
2025-08-11 13:59:00.733 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."CustomerId", o."OrderDate", o."Status", o."TotalAmount"
FROM "Order" AS o
2025-08-11 13:59:00.742 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.OrderDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 13:59:00.757 +01:00 [INF] Executed action Presentation.Controllers.OrderController.GetAllOrders (Presentation) in 35.2398ms
2025-08-11 13:59:00.763 +01:00 [INF] Executed endpoint 'Presentation.Controllers.OrderController.GetAllOrders (Presentation)'
2025-08-11 13:59:00.768 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/api/Order - 200 null application/json; charset=utf-8 74.7578ms
2025-08-11 13:59:34.209 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/api/Order/8c179327-94f5-4b16-8ec2-79e4b2528678 - null null
2025-08-11 13:59:34.217 +01:00 [INF] Executing endpoint 'Presentation.Controllers.OrderController.GetOrderById (Presentation)'
2025-08-11 13:59:34.229 +01:00 [INF] Route matched with {action = "GetOrderById", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderById(System.Guid) on controller Presentation.Controllers.OrderController (Presentation).
2025-08-11 13:59:34.254 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."CustomerId", o."OrderDate", o."Status", o."TotalAmount"
FROM "Order" AS o
WHERE o."Id" = @__id_0
LIMIT 1
2025-08-11 13:59:34.262 +01:00 [INF] Executing OkObjectResult, writing value of type 'Application.DTOs.OrderDto'.
2025-08-11 13:59:34.269 +01:00 [INF] Executed action Presentation.Controllers.OrderController.GetOrderById (Presentation) in 31.572ms
2025-08-11 13:59:34.273 +01:00 [INF] Executed endpoint 'Presentation.Controllers.OrderController.GetOrderById (Presentation)'
2025-08-11 13:59:34.275 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/api/Order/8c179327-94f5-4b16-8ec2-79e4b2528678 - 200 null application/json; charset=utf-8 65.4041ms
2025-08-11 14:00:04.657 +01:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5180/api/Order/8c179327-94f5-4b16-8ec2-79e4b2528678/complete - null 0
2025-08-11 14:00:04.687 +01:00 [INF] Executing endpoint 'Presentation.Controllers.OrderController.CompleteOrder (Presentation)'
2025-08-11 14:00:04.695 +01:00 [INF] Route matched with {action = "CompleteOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CompleteOrder(System.Guid) on controller Presentation.Controllers.OrderController (Presentation).
2025-08-11 14:00:04.711 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."CustomerId", o."OrderDate", o."Status", o."TotalAmount"
FROM "Order" AS o
WHERE o."Id" = @__id_0
LIMIT 1
2025-08-11 14:00:04.724 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Order" SET "Status" = @p0
WHERE "Id" = @p1;
2025-08-11 14:00:04.734 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-08-11 14:00:04.739 +01:00 [INF] Executed action Presentation.Controllers.OrderController.CompleteOrder (Presentation) in 35.4985ms
2025-08-11 14:00:04.744 +01:00 [INF] Executed endpoint 'Presentation.Controllers.OrderController.CompleteOrder (Presentation)'
2025-08-11 14:00:04.747 +01:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5180/api/Order/8c179327-94f5-4b16-8ec2-79e4b2528678/complete - 204 null null 90.2775ms
2025-08-11 14:00:15.946 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/api/Order/8c179327-94f5-4b16-8ec2-79e4b2528678 - null null
2025-08-11 14:00:15.954 +01:00 [INF] Executing endpoint 'Presentation.Controllers.OrderController.GetOrderById (Presentation)'
2025-08-11 14:00:15.973 +01:00 [INF] Route matched with {action = "GetOrderById", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderById(System.Guid) on controller Presentation.Controllers.OrderController (Presentation).
2025-08-11 14:00:15.987 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."CustomerId", o."OrderDate", o."Status", o."TotalAmount"
FROM "Order" AS o
WHERE o."Id" = @__id_0
LIMIT 1
2025-08-11 14:00:15.994 +01:00 [INF] Executing OkObjectResult, writing value of type 'Application.DTOs.OrderDto'.
2025-08-11 14:00:15.997 +01:00 [INF] Executed action Presentation.Controllers.OrderController.GetOrderById (Presentation) in 18.0648ms
2025-08-11 14:00:16.000 +01:00 [INF] Executed endpoint 'Presentation.Controllers.OrderController.GetOrderById (Presentation)'
2025-08-11 14:00:16.003 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/api/Order/8c179327-94f5-4b16-8ec2-79e4b2528678 - 200 null application/json; charset=utf-8 57.737ms
2025-08-11 14:00:51.212 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/api/Products - null null
2025-08-11 14:00:51.222 +01:00 [INF] Executing endpoint 'Presentation.Controllers.ProductsController.GetAllProducts (Presentation)'
2025-08-11 14:00:51.227 +01:00 [INF] Route matched with {action = "GetAllProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllProducts() on controller Presentation.Controllers.ProductsController (Presentation).
2025-08-11 14:00:51.242 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Category", p."CreatedAt", p."Description", p."Name", p."Price", p."StockQuantity", p."UpdatedAt", p."UserId"
FROM "Product" AS p
2025-08-11 14:00:51.248 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[Domain.Entities.Models.Product, Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Application.DTOs.ProductDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 14:00:51.254 +01:00 [INF] Executed action Presentation.Controllers.ProductsController.GetAllProducts (Presentation) in 13.5932ms
2025-08-11 14:00:51.259 +01:00 [INF] Executed endpoint 'Presentation.Controllers.ProductsController.GetAllProducts (Presentation)'
2025-08-11 14:00:51.262 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/api/Products - 200 null application/json; charset=utf-8 49.8135ms
2025-08-11 14:01:14.847 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/api/Order - null null
2025-08-11 14:01:14.859 +01:00 [INF] Executing endpoint 'Presentation.Controllers.OrderController.GetAllOrders (Presentation)'
2025-08-11 14:01:14.863 +01:00 [INF] Route matched with {action = "GetAllOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllOrders() on controller Presentation.Controllers.OrderController (Presentation).
2025-08-11 14:01:14.875 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."CustomerId", o."OrderDate", o."Status", o."TotalAmount"
FROM "Order" AS o
2025-08-11 14:01:14.883 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.OrderDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 14:01:14.890 +01:00 [INF] Executed action Presentation.Controllers.OrderController.GetAllOrders (Presentation) in 19.3096ms
2025-08-11 14:01:14.895 +01:00 [INF] Executed endpoint 'Presentation.Controllers.OrderController.GetAllOrders (Presentation)'
2025-08-11 14:01:14.898 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/api/Order - 200 null application/json; charset=utf-8 50.6675ms
2025-08-11 14:01:17.187 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/api/Order - null null
2025-08-11 14:01:17.195 +01:00 [INF] Executing endpoint 'Presentation.Controllers.OrderController.GetAllOrders (Presentation)'
2025-08-11 14:01:17.199 +01:00 [INF] Route matched with {action = "GetAllOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllOrders() on controller Presentation.Controllers.OrderController (Presentation).
2025-08-11 14:01:17.213 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."CustomerId", o."OrderDate", o."Status", o."TotalAmount"
FROM "Order" AS o
2025-08-11 14:01:17.219 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.OrderDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 14:01:17.224 +01:00 [INF] Executed action Presentation.Controllers.OrderController.GetAllOrders (Presentation) in 17.3099ms
2025-08-11 14:01:17.231 +01:00 [INF] Executed endpoint 'Presentation.Controllers.OrderController.GetAllOrders (Presentation)'
2025-08-11 14:01:17.235 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/api/Order - 200 null application/json; charset=utf-8 48.0587ms
2025-08-11 14:04:18.545 +01:00 [INF] Application is shutting down...
2025-08-11 14:04:27.258 +01:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-11 14:04:27.486 +01:00 [INF] Now listening on: http://localhost:5180
2025-08-11 14:04:27.491 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-11 14:04:27.496 +01:00 [INF] Hosting environment: Development
2025-08-11 14:04:27.499 +01:00 [INF] Content root path: C:\Users\user\Desktop\c##\CqrsShop\presentation
2025-08-11 14:04:31.750 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/api/Order - null null
2025-08-11 14:04:31.769 +01:00 [WRN] Failed to determine the https port for redirect.
2025-08-11 14:04:31.880 +01:00 [INF] Executing endpoint 'Presentation.Controllers.OrderController.GetAllOrders (Presentation)'
2025-08-11 14:04:31.908 +01:00 [INF] Route matched with {action = "GetAllOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllOrders() on controller Presentation.Controllers.OrderController (Presentation).
2025-08-11 14:04:33.694 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."CustomerId", o."OrderDate", o."Status", o."TotalAmount", o0."Id", o0."OrderId", o0."Price", o0."ProductId", o0."Quantity"
FROM "Order" AS o
LEFT JOIN "OrderItem" AS o0 ON o."Id" = o0."OrderId"
ORDER BY o."Id"
2025-08-11 14:04:33.792 +01:00 [INF] Executed action Presentation.Controllers.OrderController.GetAllOrders (Presentation) in 1872.3168ms
2025-08-11 14:04:33.801 +01:00 [INF] Executed endpoint 'Presentation.Controllers.OrderController.GetAllOrders (Presentation)'
2025-08-11 14:04:33.807 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Application.Features.Orders.Queries.GetAllOrdersQueryHandler.<>c.<Handle>b__2_1(OrderItem oi) in C:\Users\user\Desktop\c##\CqrsShop\application\Features\Orders\Queries\GetAllOrdersQueryHandler.cs:line 25
   at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.ListSelectIterator`2.ToList()
   at Application.Features.Orders.Queries.GetAllOrdersQueryHandler.<>c.<Handle>b__2_0(Order order) in C:\Users\user\Desktop\c##\CqrsShop\application\Features\Orders\Queries\GetAllOrdersQueryHandler.cs:line 21
   at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.ListSelectIterator`2.ToList()
   at Application.Features.Orders.Queries.GetAllOrdersQueryHandler.Handle(GetAllOrdersQuery request, CancellationToken cancellationToken) in C:\Users\user\Desktop\c##\CqrsShop\application\Features\Orders\Queries\GetAllOrdersQueryHandler.cs:line 21
   at Presentation.Controllers.OrderController.GetAllOrders() in C:\Users\user\Desktop\c##\CqrsShop\presentation\Controllers\OrderController.cs:line 53
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-11 14:04:33.901 +01:00 [ERR] Unhandled Exception: System.NullReferenceException: Object reference not set to an instance of an object.
   at Application.Features.Orders.Queries.GetAllOrdersQueryHandler.<>c.<Handle>b__2_1(OrderItem oi) in C:\Users\user\Desktop\c##\CqrsShop\application\Features\Orders\Queries\GetAllOrdersQueryHandler.cs:line 25
   at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.ListSelectIterator`2.ToList()
   at Application.Features.Orders.Queries.GetAllOrdersQueryHandler.<>c.<Handle>b__2_0(Order order) in C:\Users\user\Desktop\c##\CqrsShop\application\Features\Orders\Queries\GetAllOrdersQueryHandler.cs:line 21
   at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.ListSelectIterator`2.ToList()
   at Application.Features.Orders.Queries.GetAllOrdersQueryHandler.Handle(GetAllOrdersQuery request, CancellationToken cancellationToken) in C:\Users\user\Desktop\c##\CqrsShop\application\Features\Orders\Queries\GetAllOrdersQueryHandler.cs:line 21
   at Presentation.Controllers.OrderController.GetAllOrders() in C:\Users\user\Desktop\c##\CqrsShop\presentation\Controllers\OrderController.cs:line 53
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-11 14:04:33.969 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/api/Order - 500 null application/json; charset=utf-8 2221.4189ms
2025-08-11 14:07:48.622 +01:00 [INF] Application is shutting down...
2025-08-11 14:07:55.981 +01:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-11 14:07:56.167 +01:00 [INF] Now listening on: http://localhost:5180
2025-08-11 14:07:56.174 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-11 14:07:56.179 +01:00 [INF] Hosting environment: Development
2025-08-11 14:07:56.184 +01:00 [INF] Content root path: C:\Users\user\Desktop\c##\CqrsShop\presentation
2025-08-11 14:08:05.790 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5180/api/Order - null null
2025-08-11 14:08:05.805 +01:00 [WRN] Failed to determine the https port for redirect.
2025-08-11 14:08:05.886 +01:00 [INF] Executing endpoint 'Presentation.Controllers.OrderController.GetAllOrders (Presentation)'
2025-08-11 14:08:05.901 +01:00 [INF] Route matched with {action = "GetAllOrders", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllOrders() on controller Presentation.Controllers.OrderController (Presentation).
2025-08-11 14:08:07.632 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."CustomerId", o."OrderDate", o."Status", o."TotalAmount", t."Id", t."OrderId", t."Price", t."ProductId", t."Quantity", t."Id0", t."Category", t."CreatedAt", t."Description", t."Name", t."Price0", t."StockQuantity", t."UpdatedAt", t."UserId"
FROM "Order" AS o
LEFT JOIN (
    SELECT o0."Id", o0."OrderId", o0."Price", o0."ProductId", o0."Quantity", p."Id" AS "Id0", p."Category", p."CreatedAt", p."Description", p."Name", p."Price" AS "Price0", p."StockQuantity", p."UpdatedAt", p."UserId"
    FROM "OrderItem" AS o0
    INNER JOIN "Product" AS p ON o0."ProductId" = p."Id"
) AS t ON o."Id" = t."OrderId"
ORDER BY o."Id", t."Id"
2025-08-11 14:08:07.758 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.OrderDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 14:08:07.858 +01:00 [INF] Executed action Presentation.Controllers.OrderController.GetAllOrders (Presentation) in 1947.2103ms
2025-08-11 14:08:07.867 +01:00 [INF] Executed endpoint 'Presentation.Controllers.OrderController.GetAllOrders (Presentation)'
2025-08-11 14:08:07.886 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5180/api/Order - 200 null application/json; charset=utf-8 2096.9618ms
2025-08-11 14:09:45.429 +01:00 [INF] Application is shutting down...
